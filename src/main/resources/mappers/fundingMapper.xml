<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fundingMapper">

	<select id="getlist"
		resultType="com.ffunding.web.vo.FundingVO">
		SELECT A.FID,
		COUNT(*) AS sell ,
		ROUND( ((SUM(B.FO_PRICE)+
		SUM(B.FO_DONATION)) / A.FGOAL) * 100) AS goal,
		A.FNAME ,
		A.FPRICE ,
		A.FGOAL ,
		A.FDATE ,
		A.FSTARTDATE ,
		A.FENDDATE ,
		A.FCATE ,
		A.FIMG ,
		A.FIMG1 ,
		A.FIMG2 ,
		A.FIMG3 ,
		A.FIMG4 ,
		A.FIMG5 ,
		A.FDES ,
		A.MID
		FROM FUNDING_PRODUCT A, FUNDING_ORDER B
		WHERE A.FID = B.FID
		GROUP BY A.FID,
					A.FNAME ,
					A.FPRICE ,
					A.FGOAL ,
					A.FDATE ,
					A.FSTARTDATE ,
					A.FENDDATE ,
					A.FCATE ,
					A.FIMG ,
					A.FIMG1 ,
					A.FIMG2 ,
					A.FIMG3 ,
					A.FIMG4 ,
					A.FIMG5 ,
					A.FDES ,
					A.MID
		ORDER BY sell DESC
	</select>
</mapper>